<?php return array (
  'preserve_keys' => true,
  'update_object' => true,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => 'c31320903dac546f61ff6afee6bd921a',
  'package' => 'modx',
  'class' => 'modSnippet',
  'signature' => 'baa0dbfc1a162eb8dc6642193c9ced47',
  'native_key' => 55,
  'object' => '{"id":55,"source":1,"property_preprocess":0,"name":"pdoCrumbs","description":"","editor_type":0,"category":12,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n} else {\\n    return false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (!isset($from) || $from == \'\') {\\n    $from = 0;\\n}\\nif (empty($to)) {\\n    $to = $modx->resource->id;\\n}\\nif (empty($direction)) {\\n    $direction = \'ltr\';\\n}\\nif ($outputSeparator == \'&nbsp;&rarr;&nbsp;\' && $direction == \'rtl\') {\\n    $outputSeparator = \'&nbsp;&larr;&nbsp;\';\\n}\\nif ($limit == \'\') {\\n    $limit = 10;\\n}\\n\\/\\/ For compatibility with BreadCrumb\\nif (!empty($maxCrumbs)) {\\n    $limit = $maxCrumbs;\\n}\\nif (!empty($containerTpl)) {\\n    $tplWrapper = $containerTpl;\\n}\\nif (!empty($currentCrumbTpl)) {\\n    $tplCurrent = $currentCrumbTpl;\\n}\\nif (!empty($linkCrumbTpl)) {\\n    $scriptProperties[\'tpl\'] = $linkCrumbTpl;\\n}\\nif (!empty($maxCrumbTpl)) {\\n    $tplMax = $maxCrumbTpl;\\n}\\nif (isset($showBreadCrumbsAtHome)) {\\n    $showAtHome = $showBreadCrumbsAtHome;\\n}\\nif (isset($showHomeCrumb)) {\\n    $showHome = $showHomeCrumb;\\n}\\nif (isset($showCurrentCrumb)) {\\n    $showCurrent = $showCurrentCrumb;\\n}\\n\\/\\/ --\\n$fastMode = !empty($fastMode);\\n$siteStart = $modx->getOption(\'siteStart\', $scriptProperties, $modx->getOption(\'site_start\'));\\n\\nif (empty($showAtHome) && $modx->resource->id == $siteStart) {\\n    return \'\';\\n}\\n\\n$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\');\\n\\/\\/ Start building \\"Where\\" expression\\n$where = array();\\nif (empty($showUnpublished) && empty($showUnPub)) {\\n    $where[\'published\'] = 1;\\n}\\nif (empty($showHidden)) {\\n    $where[\'hidemenu\'] = 0;\\n}\\nif (empty($showDeleted)) {\\n    $where[\'deleted\'] = 0;\\n}\\nif (!empty($hideContainers) && empty($showContainer)) {\\n    $where[\'isfolder\'] = 0;\\n}\\n\\n$resource = ($to == $modx->resource->id)\\n    ? $modx->resource\\n    : $modx->getObject($class, $to);\\n\\nif (!$resource) {\\n    $message = \'Could not build breadcrumbs to resource \\"\' . $to . \'\\"\';\\n\\n    return \'\';\\n}\\n\\nif (!empty($customParents)) {\\n    $customParents = is_array($customParents) ? $customParents : array_map(\'trim\', explode(\',\', $customParents));\\n    $parents = is_array($customParents) ? array_reverse($customParents) : array();\\n}\\nif (empty($parents)) {\\n    $parents = $modx->getParentIds($resource->id, $limit, array(\'context\' => $resource->get(\'context_key\')));\\n}\\nif (!empty($showHome)) {\\n    $parents[] = $siteStart;\\n}\\n\\n$ids = array($resource->id);\\nforeach ($parents as $parent) {\\n    if (!empty($parent)) {\\n        $ids[] = $parent;\\n    }\\n    if (!empty($from) && $parent == $from) {\\n        break;\\n    }\\n}\\n$where[\'id:IN\'] = $ids;\\n\\nif (!empty($exclude)) {\\n    $where[\'id:NOT IN\'] = array_map(\'trim\', explode(\',\', $exclude));\\n}\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\n$select = array($class => implode(\',\', $resourceColumns));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n    \'class\' => $class,\\n    \'where\' => json_encode($where),\\n    \'select\' => json_encode($select),\\n    \'groupby\' => $class . \'.id\',\\n    \'sortby\' => \\"find_in_set(`$class`.`id`,\'\\" . implode(\',\', $ids) . \\"\')\\",\\n    \'sortdir\' => \'\',\\n    \'return\' => \'data\',\\n    \'totalVar\' => \'pdocrumbs.total\',\\n    \'disableConditions\' => true,\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n    if (strtolower($direction) == \'ltr\') {\\n        $rows = array_reverse($rows);\\n    }\\n\\n    foreach ($rows as $row) {\\n        if (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n            $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n                ? $pdoFetch->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), $row)\\n                : $row[\'content\'];\\n        } else {\\n            $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\n        }\\n\\n        $row = array_merge(\\n            $scriptProperties,\\n            $row,\\n            array(\'idx\' => $pdoFetch->idx++)\\n        );\\n        if (empty($row[\'menutitle\'])) {\\n            $row[\'menutitle\'] = $row[\'pagetitle\'];\\n        }\\n\\n        if ($row[\'id\'] == $resource->id && empty($showCurrent)) {\\n            continue;\\n        } elseif ($row[\'id\'] == $resource->id && !empty($tplCurrent)) {\\n            $tpl = $tplCurrent;\\n        } elseif ($row[\'id\'] == $siteStart && !empty($tplHome)) {\\n            $tpl = $tplHome;\\n        } else {\\n            $tpl = $pdoFetch->defineChunk($row);\\n        }\\n        $output[] = empty($tpl)\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n            : $pdoFetch->getChunk($tpl, $row, $fastMode);\\n    }\\n}\\n$pdoFetch->addTime(\'Chunks processed\');\\n\\nif (count($output) == 1 && !empty($hideSingle)) {\\n    $pdoFetch->addTime(\'The only result was hidden, because the parameter \\"hideSingle\\" activated\');\\n    $output = array();\\n}\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $log .= \'<pre class=\\"pdoCrumbsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n    $output[\'log\'] = $log;\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\n} else {\\n    $output = implode($outputSeparator, $output);\\n    if ($pdoFetch->idx >= $limit && !empty($tplMax) && !empty($output)) {\\n        $output = ($direction == \'ltr\')\\n            ? $pdoFetch->getChunk($tplMax, array(), $fastMode) . $output\\n            : $output . $pdoFetch->getChunk($tplMax, array(), $fastMode);\\n    }\\n    $output .= $log;\\n\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output, \'crumbs\' => $output), $fastMode);\\n    }\\n\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $output);\\n    } else {\\n        return $output;\\n    }\\n}","locked":0,"properties":"a:31:{s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"from\\";a:7:{s:4:\\"name\\";s:4:\\"from\\";s:4:\\"desc\\";s:18:\\"pdotools_prop_from\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:2:\\"to\\";a:7:{s:4:\\"name\\";s:2:\\"to\\";s:4:\\"desc\\";s:16:\\"pdotools_prop_to\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"customParents\\";a:7:{s:4:\\"name\\";s:13:\\"customParents\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_customParents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"exclude\\";a:7:{s:4:\\"name\\";s:7:\\"exclude\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_exclude\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"prepareTVs\\";a:7:{s:4:\\"name\\";s:10:\\"prepareTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_prepareTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"1\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"processTVs\\";a:7:{s:4:\\"name\\";s:10:\\"processTVs\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_processTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"tv.\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:19:\\"pdotools_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"pdotools_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:28:\\"pdotools_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"pdotools_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:79:\\"@INLINE <li class=\\"breadcrumb-item\\"><a href=\\"[[+link]]\\">[[+menutitle]]<\\/a><\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplCurrent\\";a:7:{s:4:\\"name\\";s:10:\\"tplCurrent\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplCurrent\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:62:\\"@INLINE <li class=\\"breadcrumb-item active\\">[[+menutitle]]<\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"tplMax\\";a:7:{s:4:\\"name\\";s:6:\\"tplMax\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_tplMax\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:65:\\"@INLINE <li class=\\"breadcrumb-item disabled\\">&nbsp;...&nbsp;<\\/li>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplHome\\";a:7:{s:4:\\"name\\";s:7:\\"tplHome\\";s:4:\\"desc\\";s:21:\\"pdotools_prop_tplHome\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:47:\\"@INLINE <ol class=\\"breadcrumb\\">[[+output]]<\\/ol>\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showCurrent\\";a:7:{s:4:\\"name\\";s:11:\\"showCurrent\\";s:4:\\"desc\\";s:25:\\"pdotools_prop_showCurrent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"showHome\\";a:7:{s:4:\\"name\\";s:8:\\"showHome\\";s:4:\\"desc\\";s:22:\\"pdotools_prop_showHome\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showAtHome\\";a:7:{s:4:\\"name\\";s:10:\\"showAtHome\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_showAtHome\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"hideSingle\\";a:7:{s:4:\\"name\\";s:10:\\"hideSingle\\";s:4:\\"desc\\";s:24:\\"pdotools_prop_hideSingle\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"direction\\";a:7:{s:4:\\"name\\";s:9:\\"direction\\";s:4:\\"desc\\";s:23:\\"pdotools_prop_direction\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:5:\\"value\\";s:3:\\"ltr\\";s:4:\\"text\\";s:19:\\"Left To Right (ltr)\\";}i:1;a:2:{s:5:\\"value\\";s:3:\\"rtl\\";s:4:\\"text\\";s:19:\\"Right To Left (rtl)\\";}}s:5:\\"value\\";s:3:\\"ltr\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"scheme\\";a:7:{s:4:\\"name\\";s:6:\\"scheme\\";s:4:\\"desc\\";s:20:\\"pdotools_prop_scheme\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:6:{i:0;a:2:{s:5:\\"value\\";s:0:\\"\\";s:4:\\"text\\";s:14:\\"System default\\";}i:1;a:2:{s:5:\\"value\\";i:-1;s:4:\\"text\\";s:25:\\"-1 (relative to site_url)\\";}i:2;a:2:{s:5:\\"value\\";s:4:\\"full\\";s:4:\\"text\\";s:40:\\"full (absolute, prepended with site_url)\\";}i:3;a:2:{s:5:\\"value\\";s:3:\\"abs\\";s:4:\\"text\\";s:39:\\"abs (absolute, prepended with base_url)\\";}i:4;a:2:{s:5:\\"value\\";s:4:\\"http\\";s:4:\\"text\\";s:38:\\"http (absolute, forced to http scheme)\\";}i:5;a:2:{s:5:\\"value\\";s:5:\\"https\\";s:4:\\"text\\";s:40:\\"https (absolute, forced to https scheme)\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"useWeblinkUrl\\";a:7:{s:4:\\"name\\";s:13:\\"useWeblinkUrl\\";s:4:\\"desc\\";s:27:\\"pdotools_prop_useWeblinkUrl\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"pdotools:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/pdotools\\/elements\\/snippets\\/snippet.pdocrumbs.php","content":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\n$path = $modx->getOption(\'pdofetch_class_path\', null, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', true);\\nif ($pdoClass = $modx->loadClass($fqn, $path, false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n} else {\\n    return false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n\\nif (!isset($from) || $from == \'\') {\\n    $from = 0;\\n}\\nif (empty($to)) {\\n    $to = $modx->resource->id;\\n}\\nif (empty($direction)) {\\n    $direction = \'ltr\';\\n}\\nif ($outputSeparator == \'&nbsp;&rarr;&nbsp;\' && $direction == \'rtl\') {\\n    $outputSeparator = \'&nbsp;&larr;&nbsp;\';\\n}\\nif ($limit == \'\') {\\n    $limit = 10;\\n}\\n\\/\\/ For compatibility with BreadCrumb\\nif (!empty($maxCrumbs)) {\\n    $limit = $maxCrumbs;\\n}\\nif (!empty($containerTpl)) {\\n    $tplWrapper = $containerTpl;\\n}\\nif (!empty($currentCrumbTpl)) {\\n    $tplCurrent = $currentCrumbTpl;\\n}\\nif (!empty($linkCrumbTpl)) {\\n    $scriptProperties[\'tpl\'] = $linkCrumbTpl;\\n}\\nif (!empty($maxCrumbTpl)) {\\n    $tplMax = $maxCrumbTpl;\\n}\\nif (isset($showBreadCrumbsAtHome)) {\\n    $showAtHome = $showBreadCrumbsAtHome;\\n}\\nif (isset($showHomeCrumb)) {\\n    $showHome = $showHomeCrumb;\\n}\\nif (isset($showCurrentCrumb)) {\\n    $showCurrent = $showCurrentCrumb;\\n}\\n\\/\\/ --\\n$fastMode = !empty($fastMode);\\n$siteStart = $modx->getOption(\'siteStart\', $scriptProperties, $modx->getOption(\'site_start\'));\\n\\nif (empty($showAtHome) && $modx->resource->id == $siteStart) {\\n    return \'\';\\n}\\n\\n$class = $modx->getOption(\'class\', $scriptProperties, \'modResource\');\\n\\/\\/ Start building \\"Where\\" expression\\n$where = array();\\nif (empty($showUnpublished) && empty($showUnPub)) {\\n    $where[\'published\'] = 1;\\n}\\nif (empty($showHidden)) {\\n    $where[\'hidemenu\'] = 0;\\n}\\nif (empty($showDeleted)) {\\n    $where[\'deleted\'] = 0;\\n}\\nif (!empty($hideContainers) && empty($showContainer)) {\\n    $where[\'isfolder\'] = 0;\\n}\\n\\n$resource = ($to == $modx->resource->id)\\n    ? $modx->resource\\n    : $modx->getObject($class, $to);\\n\\nif (!$resource) {\\n    $message = \'Could not build breadcrumbs to resource \\"\' . $to . \'\\"\';\\n\\n    return \'\';\\n}\\n\\nif (!empty($customParents)) {\\n    $customParents = is_array($customParents) ? $customParents : array_map(\'trim\', explode(\',\', $customParents));\\n    $parents = is_array($customParents) ? array_reverse($customParents) : array();\\n}\\nif (empty($parents)) {\\n    $parents = $modx->getParentIds($resource->id, $limit, array(\'context\' => $resource->get(\'context_key\')));\\n}\\nif (!empty($showHome)) {\\n    $parents[] = $siteStart;\\n}\\n\\n$ids = array($resource->id);\\nforeach ($parents as $parent) {\\n    if (!empty($parent)) {\\n        $ids[] = $parent;\\n    }\\n    if (!empty($from) && $parent == $from) {\\n        break;\\n    }\\n}\\n$where[\'id:IN\'] = $ids;\\n\\nif (!empty($exclude)) {\\n    $where[\'id:NOT IN\'] = array_map(\'trim\', explode(\',\', $exclude));\\n}\\n\\n\\/\\/ Fields to select\\n$resourceColumns = array_keys($modx->getFieldMeta($class));\\n$select = array($class => implode(\',\', $resourceColumns));\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\', \'select\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $scriptProperties[$v];\\n        if (!is_array($tmp)) {\\n            $tmp = json_decode($tmp, true);\\n        }\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n    \'class\' => $class,\\n    \'where\' => json_encode($where),\\n    \'select\' => json_encode($select),\\n    \'groupby\' => $class . \'.id\',\\n    \'sortby\' => \\"find_in_set(`$class`.`id`,\'\\" . implode(\',\', $ids) . \\"\')\\",\\n    \'sortdir\' => \'\',\\n    \'return\' => \'data\',\\n    \'totalVar\' => \'pdocrumbs.total\',\\n    \'disableConditions\' => true,\\n);\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$rows = $pdoFetch->run();\\n\\n$output = array();\\nif (!empty($rows) && is_array($rows)) {\\n    if (strtolower($direction) == \'ltr\') {\\n        $rows = array_reverse($rows);\\n    }\\n\\n    foreach ($rows as $row) {\\n        if (!empty($useWeblinkUrl) && $row[\'class_key\'] == \'modWebLink\') {\\n            $row[\'link\'] = is_numeric(trim($row[\'content\'], \'[]~ \'))\\n                ? $pdoFetch->makeUrl(intval(trim($row[\'content\'], \'[]~ \')), $row)\\n                : $row[\'content\'];\\n        } else {\\n            $row[\'link\'] = $pdoFetch->makeUrl($row[\'id\'], $row);\\n        }\\n\\n        $row = array_merge(\\n            $scriptProperties,\\n            $row,\\n            array(\'idx\' => $pdoFetch->idx++)\\n        );\\n        if (empty($row[\'menutitle\'])) {\\n            $row[\'menutitle\'] = $row[\'pagetitle\'];\\n        }\\n\\n        if ($row[\'id\'] == $resource->id && empty($showCurrent)) {\\n            continue;\\n        } elseif ($row[\'id\'] == $resource->id && !empty($tplCurrent)) {\\n            $tpl = $tplCurrent;\\n        } elseif ($row[\'id\'] == $siteStart && !empty($tplHome)) {\\n            $tpl = $tplHome;\\n        } else {\\n            $tpl = $pdoFetch->defineChunk($row);\\n        }\\n        $output[] = empty($tpl)\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\n            : $pdoFetch->getChunk($tpl, $row, $fastMode);\\n    }\\n}\\n$pdoFetch->addTime(\'Chunks processed\');\\n\\nif (count($output) == 1 && !empty($hideSingle)) {\\n    $pdoFetch->addTime(\'The only result was hidden, because the parameter \\"hideSingle\\" activated\');\\n    $output = array();\\n}\\n\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $log .= \'<pre class=\\"pdoCrumbsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n    $output[\'log\'] = $log;\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\n} else {\\n    $output = implode($outputSeparator, $output);\\n    if ($pdoFetch->idx >= $limit && !empty($tplMax) && !empty($output)) {\\n        $output = ($direction == \'ltr\')\\n            ? $pdoFetch->getChunk($tplMax, array(), $fastMode) . $output\\n            : $output . $pdoFetch->getChunk($tplMax, array(), $fastMode);\\n    }\\n    $output .= $log;\\n\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output, \'crumbs\' => $output), $fastMode);\\n    }\\n\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $output);\\n    } else {\\n        return $output;\\n    }\\n}"}',
);